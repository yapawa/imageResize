handler: services/generate.handler
name: ${self:service}-generate${self:custom.stage.suffix}
environment:
  srcBucket: ${self:custom.stage.srcBucket}
  cacheBucket: ${self:custom.stage.cacheBucket}
  cacheDomain:
    Fn::GetAtt:
      - CloudFrontCache
      - DomainName
  srcPrefix: ${self:custom.stage.photoTable, 'public'}
dependsOn:
  - CloudFrontCache
events:
  - httpApi:
      path: "/{albumId}/{photoId}/{filename}/{version}/{transformations}/{imageName}"
      method: GET
